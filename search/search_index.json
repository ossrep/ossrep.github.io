{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Open Source Retail Energy Platform","text":"<p>Welcome to ossrep - an open source microservices platform designed for retail electricity operations.</p>"},{"location":"#overview","title":"Overview","text":"<p>OSSREP provides a comprehensive set of services for managing retail electricity operations including:</p> <ul> <li>Customer Management - Individual and business customer support, multi-account hierarchies, service address and meter management</li> <li>Customer Enrollment - 7-step guided enrollment flow with plan selection, meter selection, and confirmation page</li> <li>Product/Plan Management - Rate plans with fixed, variable, and indexed pricing; renewable energy options; regulatory documents (EFL, TOS, YRAC)</li> <li>Metering - Electric meter data collection, validation, and management</li> <li>Billing - Invoice generation, payment processing, and collections</li> <li>Market Operations - EDI transactions, market messaging, and regulatory compliance</li> </ul>"},{"location":"#goals","title":"Goals","text":"<ul> <li>Provide an open source reference implementation for retail electricity software</li> <li>Demonstrate modern microservices architecture patterns</li> <li>Enable rapid development and deployment of retail electricity solutions</li> <li>Support multiple market jurisdictions and regulatory requirements</li> </ul>"},{"location":"#technology-stack","title":"Technology Stack","text":"Layer Technology API Gateway Red Hat Connectivity Link Service Mesh Red Hat Service Mesh Backend Java (Quarkus) Frontend Angular Database PostgreSQL Messaging Apache Kafka Platform OpenShift Identity Keycloak (OIDC) Infrastructure Ansible Cloud Red Hat OpenShift on AWS"},{"location":"#getting-started","title":"Getting Started","text":"<p>See the Development Setup guide to begin contributing.</p>"},{"location":"architecture/domain-model/","title":"Domain Model","text":"<p>This document describes the core domain model for OSSREP, focusing on the customer hierarchy and relationships between key entities.</p>"},{"location":"architecture/domain-model/#customer-hierarchy-overview","title":"Customer Hierarchy Overview","text":"<p>OSSREP supports two types of customers with different organizational structures:</p> <pre><code>Customer\n  \u2514\u2500\u2500 Accounts (1+ for business, typically 1 for individual)\n        \u2514\u2500\u2500 Premises (1+)\n              \u2514\u2500\u2500 Meters (1+)\n</code></pre>"},{"location":"architecture/domain-model/#customer-types","title":"Customer Types","text":""},{"location":"architecture/domain-model/#individual-customers","title":"Individual Customers","text":"<p>Individual customers are residential consumers. They typically have a simpler account structure:</p> <ul> <li>Typical case: Single account, single premise, single meter</li> <li>Extended case: Single account with multiple premises (e.g., primary residence + vacation home or rental property)</li> <li>Each premise may have multiple meters (e.g., multiple electric meters for different circuits or buildings)</li> </ul> <pre><code>Individual Customer (John Smith)\n  \u2514\u2500\u2500 Account #1234567890\n        \u251c\u2500\u2500 Premise: 123 Main Street, Anytown, TX (Primary)\n        \u2502     \u2514\u2500\u2500 Electric Meter: E-12345678\n        \u2502\n        \u2514\u2500\u2500 Premise: 456 Beach Blvd, Galveston, TX (Vacation Home)\n              \u2514\u2500\u2500 Electric Meter: E-23456789\n</code></pre>"},{"location":"architecture/domain-model/#business-customers","title":"Business Customers","text":"<p>Business customers have a more complex organizational structure to support enterprise needs:</p> <ul> <li>Multiple accounts: Businesses may have separate accounts for different departments, cost centers, or organizational units</li> <li>Multiple premises: Each account can have multiple physical locations</li> <li>Multiple meters: Each location can have multiple meters</li> </ul> <pre><code>Business Customer (Acme Corporation)\n  \u251c\u2500\u2500 Account: Headquarters (#9876543210)\n  \u2502     \u2514\u2500\u2500 100 Corporate Drive, Dallas, TX\n  \u2502           \u2514\u2500\u2500 Electric Meter: E-34567890\n  \u2502\n  \u251c\u2500\u2500 Account: Warehouse District (#5555555555)\n  \u2502     \u251c\u2500\u2500 200 Industrial Pkwy, Building A, Fort Worth, TX\n  \u2502     \u2502     \u2514\u2500\u2500 Electric Meter: E-45678901\n  \u2502     \u2514\u2500\u2500 200 Industrial Pkwy, Building B, Fort Worth, TX\n  \u2502           \u2514\u2500\u2500 Electric Meter: E-56789012\n  \u2502\n  \u2514\u2500\u2500 Account: Retail Locations (#7777777777)\n        \u251c\u2500\u2500 500 Shopping Center Blvd, Store 101, Plano, TX\n        \u2502     \u2514\u2500\u2500 Electric Meter: E-67890123\n        \u2514\u2500\u2500 750 Mall Drive, Suite 220, Arlington, TX\n              \u2514\u2500\u2500 Electric Meter: E-78901234\n</code></pre>"},{"location":"architecture/domain-model/#core-entities","title":"Core Entities","text":""},{"location":"architecture/domain-model/#customer","title":"Customer","text":"<p>The top-level entity representing an individual or business that has a relationship with the utility.</p> Attribute Type Description <code>customerId</code> Long Unique identifier <code>type</code> Enum <code>individual</code> or <code>business</code> <code>firstName</code> String First name (individual only) <code>lastName</code> String Last name (individual only) <code>businessName</code> String Business name (business only) <code>createdAt</code> Timestamp Customer creation date <code>status</code> Enum <code>active</code>, <code>inactive</code>, <code>pending</code>"},{"location":"architecture/domain-model/#account","title":"Account","text":"<p>A billing entity that groups premises. Billing occurs at the account level.</p> Attribute Type Description <code>accountId</code> Long Unique identifier <code>accountNumber</code> String Human-readable account number <code>customerId</code> Long Reference to parent customer <code>nickname</code> String Optional friendly name (e.g., \"Headquarters\") <code>status</code> Enum <code>active</code>, <code>inactive</code>, <code>pending</code> <code>currentBalance</code> Decimal Current amount due <code>createdAt</code> Timestamp Account creation date <p>Billing Level</p> <p>All billing operations (invoices, payments, collections) occur at the account level. This allows businesses to receive separate bills for different organizational units while maintaining a single customer relationship.</p>"},{"location":"architecture/domain-model/#premise","title":"Premise","text":"<p>A physical location where utility services are provided.</p> Attribute Type Description <code>premiseId</code> Long Unique identifier <code>accountId</code> Long Reference to parent account <code>street</code> String Street address <code>unit</code> String Apartment/unit number (optional) <code>city</code> String City <code>state</code> String State code <code>zip</code> String ZIP/postal code <code>isPrimary</code> Boolean Primary premise for the account <code>serviceStartDate</code> Date When service began at this location"},{"location":"architecture/domain-model/#meter","title":"Meter","text":"<p>A physical device that measures electricity consumption at a premise.</p> Attribute Type Description <code>meterId</code> Long Unique identifier <code>meterNumber</code> String Physical meter identifier <code>premiseId</code> Long Reference to premise <code>type</code> Enum <code>electric</code> <code>status</code> Enum <code>available</code>, <code>active</code>, <code>inactive</code> <code>installDate</code> Date Meter installation date <code>lastReading</code> Decimal Most recent meter reading <code>lastReadingDate</code> Date Date of most recent reading <code>unit</code> String Unit of measure (<code>kWh</code>) <p>Meter Selection During Enrollment</p> <p>During the enrollment process, customers select which meters at a premise to enroll for service. Meters with status <code>available</code> are shown to new customers. Once enrolled, the meter status changes to <code>active</code>.</p>"},{"location":"architecture/domain-model/#product-entities","title":"Product Entities","text":""},{"location":"architecture/domain-model/#plan","title":"Plan","text":"<p>A rate plan or product offering that determines pricing and contract terms.</p> Attribute Type Description <code>planId</code> Long Unique identifier <code>name</code> String Plan display name <code>description</code> String Marketing description <code>ratePerKwh</code> Decimal Energy rate in cents per kWh <code>termMonths</code> Integer Contract term length in months <code>earlyTerminationFee</code> Decimal Fee for early cancellation <code>baseCharge</code> Decimal Monthly base/service charge <code>renewablePercent</code> Integer Percentage of renewable energy (0-100) <code>planType</code> Enum <code>fixed</code>, <code>variable</code>, <code>indexed</code> <code>features</code> List Marketing features/benefits <code>status</code> Enum <code>active</code>, <code>inactive</code>, <code>archived</code>"},{"location":"architecture/domain-model/#plan-documents","title":"Plan Documents","text":"<p>Each plan requires regulatory disclosure documents:</p> Document Description EFL Electricity Facts Label - standardized pricing disclosure required by PUCT TOS Terms of Service - contract terms and conditions YRAC Your Rights as a Customer - consumer rights information <p>Plan Selection During Enrollment</p> <p>After entering a service address, customers choose from available plans for their ZIP code. The selected plan determines their energy rate, contract term, and any early termination fees.</p>"},{"location":"architecture/domain-model/#contract","title":"Contract","text":"<p>A contract represents the formal agreement between the customer and the REP for electricity service under a specific plan.</p> Attribute Type Description <code>contractId</code> Long Unique identifier <code>contractNumber</code> String Human-readable contract number <code>customerId</code> Long Reference to customer <code>planId</code> Long Reference to the selected plan <code>startDate</code> Date Service start date <code>endDate</code> Date Contract end date (calculated from plan term) <code>status</code> Enum <code>pending</code>, <code>active</code>, <code>expired</code>, <code>cancelled</code>, <code>renewed</code> <code>signedAt</code> Timestamp When customer accepted terms <code>earlyTerminationFee</code> Decimal ETF amount if cancelled early (from plan) <code>createdAt</code> Timestamp Contract creation date"},{"location":"architecture/domain-model/#contract-account-association","title":"Contract-Account Association","text":"<p>A contract can cover one or more accounts. This allows business customers to have different plans for different accounts, or a single contract covering multiple accounts.</p> Attribute Type Description <code>contractId</code> Long Reference to contract <code>accountId</code> Long Reference to account <code>addedAt</code> Timestamp When account was added to contract <pre><code>Contract\n  \u251c\u2500\u2500 Plan (determines rate and terms)\n  \u2514\u2500\u2500 Accounts (1+)\n        \u2514\u2500\u2500 Premises\n              \u2514\u2500\u2500 Meters\n</code></pre> <p>Contract Lifecycle:</p> <ol> <li>Pending - Created during enrollment, awaiting service start date</li> <li>Active - Service has started, contract is in effect</li> <li>Expired - Contract term has ended (customer may renew or switch)</li> <li>Cancelled - Customer terminated early (ETF may apply)</li> <li>Renewed - Customer renewed into a new contract</li> </ol> <p>Contract vs Plan</p> <p>A Plan is a product offering with defined rates and terms. A Contract is the specific agreement with a customer, including the actual start/end dates and which accounts are covered. Multiple customers can be on the same plan, but each has their own contract.</p>"},{"location":"architecture/domain-model/#billing-entities","title":"Billing Entities","text":""},{"location":"architecture/domain-model/#bill","title":"Bill","text":"<p>An invoice generated for an account covering a billing period.</p> Attribute Type Description <code>billId</code> Long Unique identifier <code>accountId</code> Long Reference to account <code>amount</code> Decimal Total amount due <code>dueDate</code> Date Payment due date <code>status</code> Enum <code>pending</code>, <code>unpaid</code>, <code>paid</code>, <code>overdue</code> <code>billingPeriodStart</code> Date Start of billing period <code>billingPeriodEnd</code> Date End of billing period <code>paidDate</code> Date Date payment was received (if paid) <code>paidAmount</code> Decimal Amount paid (if paid)"},{"location":"architecture/domain-model/#entity-relationships","title":"Entity Relationships","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           CUSTOMER                                \u2502\n\u2502  (Individual or Business)                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502                                       \u2502\n                \u2502 1:N                                   \u2502 1:N\n                \u25bc                                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          ACCOUNT            \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502         CONTRACT            \u2502\n\u2502  - Billing entity           \u2502   N:M   \u2502  - Plan reference           \u2502\n\u2502  - Receives invoices        \u2502         \u2502  - Start/end dates          \u2502\n\u2502  - Processes payments       \u2502         \u2502  - Terms acceptance         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502           \u2502                                  \u2502\n        \u2502 1:N       \u2502 1:N                              \u2502 N:1\n        \u25bc           \u25bc                                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   PREMISE     \u2502  \u2502     BILL      \u2502         \u2502           PLAN              \u2502\n\u2502  - Location   \u2502  \u2502  - Invoice    \u2502         \u2502  - Rate per kWh             \u2502\n\u2502  - Address    \u2502  \u2502  - Payment    \u2502         \u2502  - Term months              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502  - Features                 \u2502\n        \u2502                                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502 1:N\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    METER      \u2502\n\u2502  - Readings   \u2502\n\u2502  - Usage      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Key Relationships:</p> <ul> <li>A Customer has one or more Accounts</li> <li>A Customer has one or more Contracts (over time)</li> <li>A Contract references one Plan and covers one or more Accounts</li> <li>An Account has one or more Premises and Bills</li> <li>A Premise has one or more Meters</li> </ul>"},{"location":"architecture/domain-model/#aggregation-rules","title":"Aggregation Rules","text":""},{"location":"architecture/domain-model/#dashboard-aggregation","title":"Dashboard Aggregation","text":"<p>For customer-facing dashboards, data is aggregated across all accounts:</p> Metric Aggregation Total Balance Due Sum of all unpaid bills across all accounts Total Accounts Count of active accounts Total Premises Count across all accounts Total Meters Count across all premises Usage by Type Sum of usage grouped by meter type"},{"location":"architecture/domain-model/#business-customer-view","title":"Business Customer View","text":"<p>Business customers see an aggregated view of all their accounts by default:</p> <ul> <li>Single dashboard showing totals across all accounts</li> <li>Ability to drill down into individual accounts</li> <li>Account-level filtering for bills and usage</li> </ul>"},{"location":"architecture/domain-model/#individual-customer-view","title":"Individual Customer View","text":"<p>Individual customers see a simplified view since they typically have one account:</p> <ul> <li>Direct display of account information</li> <li>Premise list showing all locations</li> <li>Meter details for each location</li> </ul>"},{"location":"architecture/domain-model/#api-considerations","title":"API Considerations","text":""},{"location":"architecture/domain-model/#customer-context","title":"Customer Context","text":"<p>All API operations are performed within the context of the authenticated customer. The customer ID is derived from the JWT token claims.</p> <pre><code>GET /api/accounts                    \u2192 Returns all accounts for the authenticated customer\nGET /api/accounts/{accountId}        \u2192 Returns specific account (must belong to customer)\nGET /api/bills                       \u2192 Returns bills across all customer accounts\nGET /api/usage                       \u2192 Returns usage across all customer meters\n</code></pre>"},{"location":"architecture/domain-model/#account-scope","title":"Account Scope","text":"<p>Some operations can be scoped to a specific account:</p> <pre><code>GET /api/accounts/{accountId}/premises\nGET /api/accounts/{accountId}/bills\nGET /api/accounts/{accountId}/usage\n</code></pre>"},{"location":"architecture/domain-model/#meter-operations","title":"Meter Operations","text":"<p>Meter operations are typically accessed through the premise:</p> <pre><code>GET /api/premises/{premiseId}/meters\nGET /api/meters/{meterId}/readings\nGET /api/meters/{meterId}/usage?period=monthly\n</code></pre>"},{"location":"architecture/identity/","title":"Identity &amp; Access Management","text":"<p>OSSREP uses Red Hat build of Keycloak in a dual-instance architecture to separate external and internal user populations, aligning with the dual-gateway pattern.</p>"},{"location":"architecture/identity/#architecture-overview","title":"Architecture Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Customer Portal   \u2502                    \u2502    Admin Portal     \u2502\n\u2502     Mobile Apps     \u2502                    \u2502                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502                                          \u2502\n           \u25bc                                          \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Keycloak External  \u2502                    \u2502  Keycloak Internal  \u2502\n\u2502                     \u2502                    \u2502                     \u2502\n\u2502  Realm: ossrep      \u2502                    \u2502  Realm: ossrep-     \u2502\n\u2502                     \u2502                    \u2502         internal    \u2502\n\u2502  Users:             \u2502                    \u2502                     \u2502\n\u2502  - Customers        \u2502                    \u2502  Users:             \u2502\n\u2502  - Partners         \u2502                    \u2502  - Employees        \u2502\n\u2502  - Third-party apps \u2502                    \u2502  - Administrators   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/identity/#why-two-keycloak-instances","title":"Why Two Keycloak Instances?","text":"Concern Benefit of Separation Security isolation Compromise of external IdP doesn't affect internal systems Policy flexibility Different password policies, MFA requirements, session timeouts User experience Tailored login flows for each audience Compliance Easier audit trails and access reviews per user population Availability External traffic spikes don't impact internal operations"},{"location":"architecture/identity/#instance-configuration","title":"Instance Configuration","text":""},{"location":"architecture/identity/#external-keycloak","title":"External Keycloak","text":"<p>Serves customer-facing applications and public APIs.</p> Setting Value Port 8180 (dev) Realm <code>ossrep</code> Admin Console http://localhost:8180 <p>Clients:</p> <ul> <li><code>ossrep-customer-portal</code> - Customer self-service web application</li> <li><code>ossrep-mobile</code> - iOS and Android mobile apps</li> <li><code>ossrep-api</code> - Third-party API consumers</li> </ul>"},{"location":"architecture/identity/#internal-keycloak","title":"Internal Keycloak","text":"<p>Serves administrative applications and internal APIs.</p> Setting Value Port 8181 (dev) Realm <code>ossrep-internal</code> Admin Console http://localhost:8181 <p>Clients:</p> <ul> <li><code>ossrep-admin-portal</code> - Internal operations and customer service</li> <li><code>ossrep-service-accounts</code> - Service-to-service authentication</li> </ul>"},{"location":"architecture/identity/#local-development-setup","title":"Local Development Setup","text":""},{"location":"architecture/identity/#starting-both-keycloak-instances","title":"Starting Both Keycloak Instances","text":"<p>The easiest way to start both Keycloak instances (along with PostgreSQL and Kafka) is using podman-compose from the <code>ossrep.github.io</code> repository:</p> <pre><code># Authenticate with Red Hat registry (requires free developer account)\npodman login registry.redhat.io\n\ncd ossrep.github.io\npodman-compose up -d\n</code></pre> <p>Both Keycloak instances automatically import pre-configured realms with test users on startup.</p>"},{"location":"architecture/identity/#pre-configured-test-users","title":"Pre-configured Test Users","text":""},{"location":"architecture/identity/#external-keycloak-httplocalhost8180","title":"External Keycloak (http://localhost:8180)","text":"<p>Realm: <code>ossrep</code></p> Username Password Role Description alice password customer Standard customer bob password customer Standard customer carol password partner Partner organization"},{"location":"architecture/identity/#internal-keycloak-httplocalhost8181","title":"Internal Keycloak (http://localhost:8181)","text":"<p>Realm: <code>ossrep-internal</code></p> Username Password Role Description jsmith password csr Customer service rep mjones password supervisor Team supervisor admin password admin System administrator"},{"location":"architecture/identity/#admin-console-access","title":"Admin Console Access","text":"<p>Both instances have admin consoles available:</p> <ul> <li>External: http://localhost:8180 (admin / admin)</li> <li>Internal: http://localhost:8181 (admin / admin)</li> </ul>"},{"location":"architecture/identity/#realm-configuration-files","title":"Realm Configuration Files","text":"<p>The realm configurations are stored in <code>keycloak/</code> and mounted into the containers:</p> <ul> <li><code>keycloak/ossrep-realm.json</code> - External realm for customers/partners</li> <li><code>keycloak/ossrep-internal-realm.json</code> - Internal realm for employees/admins</li> </ul> <p>To modify the default configuration, edit these files and restart the containers:</p> <pre><code>podman-compose down\npodman-compose up -d\n</code></pre> <p>Realm Import Behavior</p> <p>Keycloak only imports realms if they don't already exist. To re-import after changes,  remove the existing realm via the admin console or delete the container volumes: <code>podman-compose down -v</code></p>"},{"location":"architecture/identity/#roles-and-permissions","title":"Roles and Permissions","text":""},{"location":"architecture/identity/#external-realm-roles","title":"External Realm Roles","text":"Role Description <code>customer</code> Standard customer access <code>partner</code> Partner organization access <code>api-consumer</code> Third-party API access"},{"location":"architecture/identity/#internal-realm-roles","title":"Internal Realm Roles","text":"Role Description <code>csr</code> Customer service representative <code>supervisor</code> Team supervisor with escalation access <code>admin</code> System administrator <code>readonly</code> Read-only access for auditors"},{"location":"architecture/identity/#service-integration","title":"Service Integration","text":"<p>All backend services validate JWT tokens from both Keycloak instances. Services determine which issuer to trust based on the API gateway the request arrived through:</p> <ul> <li>Requests via External Gateway \u2192 validate against External Keycloak</li> <li>Requests via Internal Gateway \u2192 validate against Internal Keycloak</li> </ul> <pre><code># Example Quarkus configuration\nquarkus:\n  oidc:\n    auth-server-url: ${OIDC_ISSUER:http://localhost:8180/realms/ossrep}\n    client-id: ${OIDC_CLIENT_ID:ossrep-backend}\n</code></pre>"},{"location":"architecture/identity/#production-considerations","title":"Production Considerations","text":"<p>Development vs Production</p> <p>The <code>start-dev</code> mode is for local development only. Production deployments should use:</p> <ul> <li>Externalized PostgreSQL database</li> <li>TLS/HTTPS configuration</li> <li>Proper admin credentials</li> <li>High availability configuration</li> </ul> <p>For production deployment patterns, refer to the Red Hat build of Keycloak documentation.</p>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>OSSREP follows a microservices architecture pattern, with each service responsible for a specific business domain.</p>"},{"location":"architecture/overview/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502 Customer Portal  \u2502                    \u2502  Admin Portal    \u2502\n    \u2502   (Angular)      \u2502                    \u2502   (Angular)      \u2502\n    \u2502                  \u2502                    \u2502                  \u2502\n    \u2502   Mobile Apps    \u2502                    \u2502                  \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n             \u2502                                       \u2502\n             \u25bc                                       \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502 External Gateway \u2502                    \u2502 Internal Gateway \u2502\n    \u2502  (Connectivity   \u2502                    \u2502  (Connectivity   \u2502\n    \u2502      Link)       \u2502                    \u2502      Link)       \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n             \u2502                                       \u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                             \u25bc\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u2502       Red Hat Service Mesh     \u2502\n            \u2502         (Istio-based)          \u2502\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u25bc             \u25bc             \u25bc             \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502Customer \u2502  \u2502 Meter   \u2502  \u2502 Billing \u2502  \u2502 Market  \u2502  ...\n   \u2502 Service \u2502  \u2502 Service \u2502  \u2502 Service \u2502  \u2502 Service \u2502\n   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n        \u2502            \u2502            \u2502            \u2502\n        \u25bc            \u25bc            \u25bc            \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502   DB    \u2502  \u2502   DB    \u2502  \u2502   DB    \u2502  \u2502   DB    \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502            \u2502            \u2502            \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u25bc\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502      Apache Kafka         \u2502\n           \u2502   (Event Streaming)       \u2502\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#gateway-architecture","title":"Gateway Architecture","text":"<p>OSSREP uses a dual-gateway pattern with Red Hat Connectivity Link to separate external and internal traffic:</p>"},{"location":"architecture/overview/#external-gateway","title":"External Gateway","text":"<p>Handles all public-facing API traffic:</p> <ul> <li>Customer Portal - Self-service web application</li> <li>Mobile Apps - iOS and Android applications</li> <li>Public API consumers</li> </ul> <p>Exposes only customer-facing endpoints with appropriate rate limiting and security policies.</p>"},{"location":"architecture/overview/#internal-gateway","title":"Internal Gateway","text":"<p>Handles all internal administrative traffic:</p> <ul> <li>Admin Portal - Internal operations and customer service</li> <li>Administrative APIs with elevated privileges</li> </ul> <p>Restricted to internal network access with additional authentication requirements.</p>"},{"location":"architecture/overview/#design-principles","title":"Design Principles","text":""},{"location":"architecture/overview/#domain-driven-design","title":"Domain-Driven Design","text":"<p>Each microservice is aligned with a specific bounded context. See Domain Model for detailed entity relationships.</p> Service Bounded Context Customer Customers, accounts, premises, meters Meter Meter readings, data validation, usage calculations Billing Invoices, payments, and collections Market EDI transactions, market participant communications Product Rate plans, pricing, terms, regulatory documents"},{"location":"architecture/overview/#customer-hierarchy","title":"Customer Hierarchy","text":"<p>The Customer Service supports a flexible hierarchy to accommodate both residential and commercial customers:</p> <ul> <li>Individual customers: Typically one account with one or more premises</li> <li>Business customers: Multiple accounts (by department/location), each with multiple premises and meters</li> <li>Billing: Occurs at the account level, with aggregated views for business customers</li> </ul>"},{"location":"architecture/overview/#database-per-service","title":"Database per Service","text":"<p>Each service owns its data and has a dedicated PostgreSQL database. Services communicate through:</p> <ul> <li>Synchronous - REST APIs for queries and commands</li> <li>Asynchronous - Kafka events for eventual consistency</li> </ul>"},{"location":"architecture/overview/#authentication-authorization","title":"Authentication &amp; Authorization","text":"<ul> <li>All services integrate with OIDC-compliant identity providers</li> <li>Keycloak serves as the reference implementation</li> <li>JWT tokens are used for service-to-service authentication</li> <li>Role-based access control (RBAC) at the API level</li> </ul>"},{"location":"architecture/overview/#deployment","title":"Deployment","text":"<p>Services are containerized and deployed to OpenShift (Red Hat's enterprise Kubernetes distribution). Infrastructure automation is handled through Ansible.</p>"},{"location":"architecture/technology-stack/","title":"Technology Stack","text":"<p>OSSREP is built on Red Hat technologies and partners to provide enterprise-grade reliability and support.</p>"},{"location":"architecture/technology-stack/#api-gateway-service-mesh","title":"API Gateway &amp; Service Mesh","text":""},{"location":"architecture/technology-stack/#red-hat-connectivity-link","title":"Red Hat Connectivity Link","text":"<p>API gateway solution providing:</p> <ul> <li>External Gateway - Public-facing APIs for customer portal and mobile apps</li> <li>Internal Gateway - Administrative APIs for the admin portal</li> </ul> <p>Key capabilities:</p> Capability Description Traffic Management Rate limiting, load balancing, circuit breaking Security mTLS, API key management, OAuth integration Observability Request logging, metrics, distributed tracing Policy Enforcement Access control, request/response transformation"},{"location":"architecture/technology-stack/#red-hat-service-mesh","title":"Red Hat Service Mesh","text":"<p>Istio-based service mesh for secure service-to-service communication:</p> Capability Description mTLS Automatic encryption between services Traffic Control Canary deployments, A/B testing, fault injection Observability Distributed tracing, service topology Resilience Retries, timeouts, circuit breakers"},{"location":"architecture/technology-stack/#backend-services","title":"Backend Services","text":""},{"location":"architecture/technology-stack/#java-quarkus","title":"Java &amp; Quarkus","text":"<p>All backend services are built using:</p> <ul> <li>Java - Latest LTS release</li> <li>Quarkus - Supersonic Subatomic Java framework</li> <li>Maven - Build and dependency management</li> </ul> <p>Key Quarkus extensions used across services:</p> Extension Purpose <code>rest-jackson</code> REST API with JSON <code>hibernate-orm-panache</code> Database access <code>flyway</code> Database migrations <code>smallrye-openapi</code> OpenAPI documentation <code>smallrye-health</code> Health checks <code>micrometer-registry-prometheus</code> Metrics <code>oidc</code> Authentication <code>smallrye-reactive-messaging</code> Kafka integration"},{"location":"architecture/technology-stack/#database","title":"Database","text":"<ul> <li>PostgreSQL - Primary data store for all services</li> <li>Each service has its own database schema</li> <li>Flyway manages schema migrations</li> </ul>"},{"location":"architecture/technology-stack/#frontend","title":"Frontend","text":""},{"location":"architecture/technology-stack/#angular","title":"Angular","text":"<ul> <li>Angular - Latest LTS release</li> <li>Bootstrap - Styling via ng-bootstrap components</li> <li>Signals - Reactive state management</li> <li>OIDC integration for authentication</li> </ul>"},{"location":"architecture/technology-stack/#messaging","title":"Messaging","text":""},{"location":"architecture/technology-stack/#apache-kafka","title":"Apache Kafka","text":"<ul> <li>Event streaming platform (Confluent or AMQ Streams)</li> <li>Enables asynchronous communication between services</li> <li>Supports event sourcing and CQRS patterns</li> </ul>"},{"location":"architecture/technology-stack/#infrastructure","title":"Infrastructure","text":""},{"location":"architecture/technology-stack/#container-platform","title":"Container Platform","text":"<ul> <li>OpenShift - Enterprise Kubernetes platform</li> <li>ROSA - Red Hat OpenShift on AWS for cloud deployments</li> </ul>"},{"location":"architecture/technology-stack/#identity-management","title":"Identity Management","text":"<ul> <li>Keycloak - Reference OIDC provider</li> <li>Services are OIDC-agnostic for flexibility</li> </ul>"},{"location":"architecture/technology-stack/#automation","title":"Automation","text":"<ul> <li>Ansible - Infrastructure and deployment automation</li> </ul>"},{"location":"architecture/technology-stack/#serialization","title":"Serialization","text":""},{"location":"architecture/technology-stack/#protocol-buffers","title":"Protocol Buffers","text":"<ul> <li>Used for efficient service-to-service communication</li> <li>Proto3 syntax</li> <li>Strict enum conventions with <code>UNSPECIFIED</code> as zero value</li> </ul>"},{"location":"getting-started/development-setup/","title":"Development Setup","text":"<p>This guide covers setting up your local development environment for OSSREP.</p>"},{"location":"getting-started/development-setup/#prerequisites","title":"Prerequisites","text":""},{"location":"getting-started/development-setup/#system-requirements","title":"System Requirements","text":"<ul> <li>Fedora or RHEL-based Linux distribution</li> <li>16GB RAM minimum (32GB recommended)</li> <li>50GB available disk space</li> </ul>"},{"location":"getting-started/development-setup/#required-software","title":"Required Software","text":"<p>Install the following tools:</p> <pre><code># Java (Latest LTS)\nsudo dnf install java-21-openjdk-devel\n\n# Maven\nsudo dnf install maven\n\n# Node.js (Latest LTS)\nsudo dnf install nodejs\n\n# Angular CLI\nnpm install -g @angular/cli\n\n# Quarkus CLI\ncurl -Ls https://sh.jbang.dev | bash -s - trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/\ncurl -Ls https://sh.jbang.dev | bash -s - app install --fresh --force quarkus@quarkusio\n\n# Podman (container runtime)\nsudo dnf install podman podman-compose\n</code></pre>"},{"location":"getting-started/development-setup/#local-services","title":"Local Services","text":"<p>For local development, you'll need PostgreSQL, Keycloak (two instances), and Kafka. The easiest way to start all services is with podman-compose.</p>"},{"location":"getting-started/development-setup/#red-hat-registry-authentication","title":"Red Hat Registry Authentication","text":"<p>The compose file uses Red Hat container images. Authenticate with the registry first (requires a free Red Hat developer account):</p> <pre><code>podman login registry.redhat.io\n</code></pre>"},{"location":"getting-started/development-setup/#starting-services","title":"Starting Services","text":"<pre><code>cd ossrep.github.io\npodman-compose up -d\n</code></pre> <p>This starts:</p> Service Image Port Purpose PostgreSQL rhel9/postgresql-16:latest 5432 Database Keycloak External rhbk/keycloak-rhel9:26.0 8180 Customers, partners Keycloak Internal rhbk/keycloak-rhel9:26.0 8181 Admins, employees Kafka amq-streams/kafka-37-rhel9:2.7.0 9094 Event streaming <p>To stop all services:</p> <pre><code>podman-compose down\n</code></pre>"},{"location":"getting-started/development-setup/#test-users","title":"Test Users","text":"<p>Both Keycloak instances come pre-configured with test users:</p> Keycloak Realm Username Password Role External (8180) ossrep alice password customer External (8180) ossrep bob password customer Internal (8181) ossrep-internal jsmith password csr Internal (8181) ossrep-internal admin password admin <p>See Identity &amp; Access Management for full details.</p>"},{"location":"getting-started/development-setup/#project-structure","title":"Project Structure","text":"<p>Clone repositories into the organization folder:</p> <pre><code>cd ~/projects/github/ossrep\n\n# Documentation site\ngit clone git@github.com:ossrep/ossrep.github.io.git\n\n# Services (as they are created)\ngit clone git@github.com:ossrep/customer-service.git\ngit clone git@github.com:ossrep/meter-service.git\n# ... etc\n</code></pre>"},{"location":"getting-started/development-setup/#creating-a-new-quarkus-service","title":"Creating a New Quarkus Service","text":"<pre><code>GROUP_ID=io.github.ossrep\nARTIFACT_ID=customer-service\n\nquarkus create app --wrapper --no-code \\\n    -x config-yaml,rest-jackson,smallrye-openapi,smallrye-health,micrometer-registry-prometheus \\\n    $GROUP_ID:$ARTIFACT_ID:0.0.1-SNAPSHOT\n\ncd \"$ARTIFACT_ID\"\ngit init\ngit add .\ngit commit -m 'Quarkus project init'\n</code></pre>"},{"location":"getting-started/development-setup/#creating-a-new-angular-application","title":"Creating a New Angular Application","text":"<pre><code>NG_PROJECT_NAME=customer-portal\n\nng new --routing --style scss --ssr false --zoneless false --defaults $NG_PROJECT_NAME\n\ncd \"$NG_PROJECT_NAME\"\nng add @ng-bootstrap/ng-bootstrap --skip-confirmation\nng generate environments\ngit add .\ngit commit -m 'Angular project init'\n</code></pre>"},{"location":"getting-started/development-setup/#running-services","title":"Running Services","text":""},{"location":"getting-started/development-setup/#quarkus-dev-mode","title":"Quarkus Dev Mode","text":"<pre><code>cd customer-service\n./mvnw quarkus:dev\n</code></pre> <p>The service will be available at <code>http://localhost:8080</code> with:</p> <ul> <li>OpenAPI UI: <code>http://localhost:8080/q/swagger-ui</code></li> <li>Health: <code>http://localhost:8080/q/health</code></li> <li>Metrics: <code>http://localhost:8080/q/metrics</code></li> </ul>"},{"location":"getting-started/development-setup/#angular-dev-server","title":"Angular Dev Server","text":"<pre><code>cd customer-portal\nng serve\n</code></pre> <p>The application will be available at <code>http://localhost:4200</code>.</p>"},{"location":"getting-started/development-setup/#ide-setup","title":"IDE Setup","text":""},{"location":"getting-started/development-setup/#intellij-idea-jetbrains","title":"IntelliJ IDEA / JetBrains","text":"<ul> <li>Install the Quarkus plugin</li> <li>Enable annotation processing for Lombok (if used)</li> </ul>"},{"location":"getting-started/development-setup/#vs-code-cursor","title":"VS Code / Cursor","text":"<p>Recommended extensions:</p> <ul> <li>Quarkus</li> <li>Java Extension Pack</li> <li>Angular Language Service</li> </ul>"},{"location":"services/customer-service/","title":"Customer Service","text":"<p>The Customer Service manages customer lifecycle, accounts, premises, and meters. It is the central service for customer-related operations in OSSREP.</p>"},{"location":"services/customer-service/#overview","title":"Overview","text":"<p>Repository: <code>customer-service</code></p> <p>Key Responsibilities:</p> <ul> <li>Customer enrollment and management</li> <li>Account lifecycle operations</li> <li>Premise management</li> <li>Meter registration and tracking</li> <li>Customer preferences and communication settings</li> </ul>"},{"location":"services/customer-service/#domain-model","title":"Domain Model","text":"<p>See Domain Model for detailed entity descriptions and relationships.</p>"},{"location":"services/customer-service/#entity-hierarchy","title":"Entity Hierarchy","text":"<pre><code>Customer \u2192 Accounts \u2192 Premises \u2192 Meters\n</code></pre>"},{"location":"services/customer-service/#enrollment-flow","title":"Enrollment Flow","text":"<p>The Customer Portal provides a 7-step guided enrollment flow for new customers:</p>"},{"location":"services/customer-service/#step-1-customer-type","title":"Step 1: Customer Type","text":"<p>Select the type of customer account:</p> <ul> <li>Individual / Residential - For homeowners and renters</li> <li>Business / Commercial - For businesses, organizations, and commercial properties</li> </ul>"},{"location":"services/customer-service/#step-2-contact-information","title":"Step 2: Contact Information","text":"<p>Collect customer contact details:</p> <p>Individual customers:</p> <ul> <li>First name, last name</li> <li>Email address</li> <li>Phone number</li> </ul> <p>Business customers:</p> <ul> <li>Legal business name</li> <li>Business type (LLC, Corporation, etc.)</li> <li>Tax ID / EIN</li> <li>Business email and phone</li> <li>Primary contact person details</li> </ul>"},{"location":"services/customer-service/#step-3-service-address-start-date","title":"Step 3: Service Address &amp; Start Date","text":"<p>The physical premise address where electricity service is needed:</p> <ul> <li>Street address</li> <li>Apartment/suite/unit (optional)</li> <li>City, state, ZIP code</li> <li>Requested service start date - When the customer wants service to begin</li> </ul> <p>The start date is used to create the contract with calculated end date based on the selected plan's term.</p>"},{"location":"services/customer-service/#step-4-plan-selection","title":"Step 4: Plan Selection","text":"<p>After the service address is entered, available plans for that location are displayed:</p> <ul> <li>Plans are filtered by service area/ZIP code</li> <li>Each plan displays rate per kWh, term length, and features</li> <li>Plan types include fixed-rate, variable, and indexed options</li> <li>Renewable energy options (wind, solar) with percentage shown</li> <li>Early termination fees displayed for contract plans</li> <li>Links to required disclosure documents:<ul> <li>EFL (Electricity Facts Label) - standardized pricing disclosure</li> <li>TOS (Terms of Service) - contract terms and conditions</li> <li>YRAC (Your Rights as a Customer) - consumer rights information</li> </ul> </li> </ul> <p>The selected plan determines the customer's energy rate and contract terms.</p>"},{"location":"services/customer-service/#step-5-meter-selection","title":"Step 5: Meter Selection","text":"<p>After selecting a plan, available meters at the premise are retrieved:</p> <ul> <li>System looks up meters registered at the address</li> <li>Individual customers typically see a single meter</li> <li>Business customers may see multiple meters (e.g., different buildings, units, or circuits)</li> <li>Customer selects one or more meters to enroll for service</li> <li>At least one meter must be selected to proceed</li> </ul> <p>This step ensures customers only enroll for meters at their specific premise location.</p>"},{"location":"services/customer-service/#step-6-mailing-address","title":"Step 6: Mailing Address","text":"<p>Billing/mailing address for correspondence:</p> <ul> <li>Option to use service address as mailing address</li> <li>Or specify a separate mailing address</li> </ul>"},{"location":"services/customer-service/#step-7-review-terms","title":"Step 7: Review &amp; Terms","text":"<p>Final enrollment summary and terms acceptance:</p> <ul> <li>Bill delivery preference (email, mail, or both)</li> <li>Marketing opt-in/out</li> <li>Terms of service acceptance (including EFL, TOS, YRAC acknowledgment)</li> <li>Summary showing:<ul> <li>Customer info and contact details</li> <li>Service address and selected meters</li> <li>Selected plan with rate and features</li> <li>Contract details: start date, end date, term length, and early termination fee (if applicable)</li> </ul> </li> </ul>"},{"location":"services/customer-service/#confirmation-page","title":"Confirmation Page","text":"<p>Upon successful enrollment submission, customers are redirected to a confirmation page:</p> <ul> <li>Confirmation Number - Unique reference for the enrollment (e.g., <code>ENR-M5X2Y3-AB4C</code>)</li> <li>Complete Summary - All enrollment details displayed in organized cards:<ul> <li>Customer information</li> <li>Service address and enrolled meters</li> <li>Plan details (rate, term, features)</li> <li>Contract dates (start and end)</li> </ul> </li> <li>What Happens Next - Timeline showing:<ol> <li>Confirmation email will be sent</li> <li>Service activation on the start date</li> <li>First bill after initial billing cycle</li> </ol> </li> <li>Actions - Print summary button and link to sign in</li> </ul> <p>A Contract is created linking the selected plan to the customer's accounts.</p>"},{"location":"services/customer-service/#customer-types","title":"Customer Types","text":"<p>The service supports two customer types with different organizational structures:</p>"},{"location":"services/customer-service/#individual-customers","title":"Individual Customers","text":"<p>Residential consumers with simpler account structures:</p> <ul> <li>Typically one account</li> <li>One or more premises (primary residence, vacation homes, rentals)</li> <li>One or more meters per premise</li> </ul>"},{"location":"services/customer-service/#business-customers","title":"Business Customers","text":"<p>Commercial/industrial customers with complex organizational needs:</p> <ul> <li>Multiple accounts (by department, cost center, location group)</li> <li>Multiple premises per account</li> <li>Multiple meters per premise</li> <li>Aggregated billing and reporting across all accounts</li> </ul>"},{"location":"services/customer-service/#api-endpoints","title":"API Endpoints","text":""},{"location":"services/customer-service/#enrollment-operations","title":"Enrollment Operations","text":"Method Endpoint Description <code>POST</code> <code>/api/enrollment</code> Submit new customer enrollment <code>GET</code> <code>/api/enrollment/plans</code> Get available plans for a ZIP code <code>GET</code> <code>/api/enrollment/plans/{planId}</code> Get plan details with EFL, TOS, YRAC <code>GET</code> <code>/api/enrollment/meters</code> Look up available meters at an address <code>POST</code> <code>/api/enrollment/validate-address</code> Validate service address"},{"location":"services/customer-service/#customer-operations","title":"Customer Operations","text":"Method Endpoint Description <code>GET</code> <code>/api/customer</code> Get current customer profile <code>PUT</code> <code>/api/customer</code> Update customer profile <code>GET</code> <code>/api/customer/summary</code> Get aggregated customer summary"},{"location":"services/customer-service/#account-operations","title":"Account Operations","text":"Method Endpoint Description <code>GET</code> <code>/api/accounts</code> List all accounts for customer <code>GET</code> <code>/api/accounts/{accountId}</code> Get account details <code>PUT</code> <code>/api/accounts/{accountId}</code> Update account (nickname, etc.) <code>GET</code> <code>/api/accounts/{accountId}/summary</code> Get account summary with balances"},{"location":"services/customer-service/#premise-operations","title":"Premise Operations","text":"Method Endpoint Description <code>GET</code> <code>/api/accounts/{accountId}/premises</code> List premises for account <code>GET</code> <code>/api/premises/{premiseId}</code> Get premise details <code>PUT</code> <code>/api/premises/{premiseId}</code> Update premise <code>POST</code> <code>/api/premises/{premiseId}/set-primary</code> Set as primary premise"},{"location":"services/customer-service/#meter-operations","title":"Meter Operations","text":"Method Endpoint Description <code>GET</code> <code>/api/premises/{premiseId}/meters</code> List meters at premise <code>GET</code> <code>/api/meters/{meterId}</code> Get meter details <code>GET</code> <code>/api/meters/{meterId}/readings</code> Get meter reading history"},{"location":"services/customer-service/#preferences-operations","title":"Preferences Operations","text":"Method Endpoint Description <code>GET</code> <code>/api/preferences</code> Get customer preferences <code>PUT</code> <code>/api/preferences</code> Update preferences <code>GET</code> <code>/api/preferences/notifications</code> Get notification settings <code>PUT</code> <code>/api/preferences/notifications</code> Update notification settings"},{"location":"services/customer-service/#contract-operations","title":"Contract Operations","text":"Method Endpoint Description <code>GET</code> <code>/api/contracts</code> List all contracts for customer <code>GET</code> <code>/api/contracts/{contractId}</code> Get contract details <code>GET</code> <code>/api/contracts/active</code> Get currently active contract(s) <code>POST</code> <code>/api/contracts/{contractId}/renew</code> Renew an expiring contract <code>POST</code> <code>/api/contracts/{contractId}/cancel</code> Cancel contract (ETF may apply) <code>GET</code> <code>/api/contracts/{contractId}/accounts</code> List accounts covered by contract"},{"location":"services/customer-service/#data-models","title":"Data Models","text":""},{"location":"services/customer-service/#available-plans-response","title":"Available Plans Response","text":"<pre><code>{\n  \"zipCode\": \"75001\",\n  \"plans\": [\n    {\n      \"planId\": 1001,\n      \"name\": \"Green Energy 12\",\n      \"description\": \"Lock in a competitive rate with 100% renewable energy from Texas wind farms.\",\n      \"ratePerKwh\": 11.9,\n      \"termMonths\": 12,\n      \"earlyTerminationFee\": 150.00,\n      \"baseCharge\": 9.95,\n      \"renewablePercent\": 100,\n      \"planType\": \"fixed\",\n      \"features\": [\"100% Wind Energy\", \"Fixed Rate\", \"No Hidden Fees\"],\n      \"documents\": {\n        \"eflUrl\": \"/api/enrollment/plans/1001/efl\",\n        \"tosUrl\": \"/api/enrollment/plans/1001/tos\",\n        \"yracUrl\": \"/api/enrollment/plans/1001/yrac\"\n      }\n    },\n    {\n      \"planId\": 1002,\n      \"name\": \"Value Saver 24\",\n      \"description\": \"Our best long-term value with a low fixed rate locked in for 2 years.\",\n      \"ratePerKwh\": 10.5,\n      \"termMonths\": 24,\n      \"earlyTerminationFee\": 200.00,\n      \"baseCharge\": 4.95,\n      \"renewablePercent\": 15,\n      \"planType\": \"fixed\",\n      \"features\": [\"Lowest Rate\", \"24-Month Price Lock\", \"Low Base Charge\"],\n      \"documents\": {\n        \"eflUrl\": \"/api/enrollment/plans/1002/efl\",\n        \"tosUrl\": \"/api/enrollment/plans/1002/tos\",\n        \"yracUrl\": \"/api/enrollment/plans/1002/yrac\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#enrollment-request","title":"Enrollment Request","text":"<pre><code>{\n  \"customerType\": \"individual\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Smith\",\n  \"email\": \"john.smith@example.com\",\n  \"phone\": \"(555) 123-4567\",\n  \"serviceAddress\": {\n    \"street\": \"123 Main Street\",\n    \"unit\": null,\n    \"city\": \"Anytown\",\n    \"state\": \"TX\",\n    \"zip\": \"75001\"\n  },\n  \"serviceStartDate\": \"2025-02-01\",\n  \"selectedPlanId\": 1001,\n  \"selectedMeterIds\": [3001],\n  \"mailingAddress\": {\n    \"sameAsService\": true\n  },\n  \"preferences\": {\n    \"billDelivery\": \"email\",\n    \"marketingOptIn\": false\n  },\n  \"acceptedTerms\": true\n}\n</code></pre>"},{"location":"services/customer-service/#enrollment-response","title":"Enrollment Response","text":"<pre><code>{\n  \"success\": true,\n  \"confirmationNumber\": \"ENR-M5X2Y3-AB4C\",\n  \"customerId\": 1,\n  \"contractId\": 5001,\n  \"contract\": {\n    \"contractNumber\": \"CTR-2025-00001\",\n    \"startDate\": \"2025-02-01\",\n    \"endDate\": \"2026-02-01\",\n    \"status\": \"pending\"\n  },\n  \"accountId\": 1001,\n  \"accountNumber\": \"1234567890\",\n  \"enrolledMeters\": [\n    {\n      \"meterId\": 3001,\n      \"meterNumber\": \"E-12345678\"\n    }\n  ],\n  \"submittedAt\": \"2025-01-15T14:30:00Z\",\n  \"nextSteps\": [\n    \"Confirmation email sent to john.smith@example.com\",\n    \"Service activation scheduled for Feb 1, 2025\",\n    \"First bill will be generated after initial billing cycle\"\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#business-enrollment-request","title":"Business Enrollment Request","text":"<pre><code>{\n  \"customerType\": \"business\",\n  \"businessName\": \"Acme Corporation\",\n  \"businessType\": \"corporation\",\n  \"taxId\": \"12-3456789\",\n  \"email\": \"accounts@acme.com\",\n  \"phone\": \"(555) 987-6543\",\n  \"primaryContact\": {\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Doe\",\n    \"title\": \"Office Manager\",\n    \"email\": \"jane.doe@acme.com\",\n    \"phone\": \"(555) 987-6544\"\n  },\n  \"serviceAddress\": {\n    \"street\": \"100 Corporate Drive\",\n    \"unit\": \"Suite 500\",\n    \"city\": \"Dallas\",\n    \"state\": \"TX\",\n    \"zip\": \"75201\"\n  },\n  \"serviceStartDate\": \"2025-02-15\",\n  \"selectedPlanId\": 1002,\n  \"selectedMeterIds\": [3001, 3002, 3003],\n  \"mailingAddress\": {\n    \"sameAsService\": false,\n    \"street\": \"PO Box 1234\",\n    \"city\": \"Dallas\",\n    \"state\": \"TX\",\n    \"zip\": \"75221\"\n  },\n  \"preferences\": {\n    \"billDelivery\": \"both\",\n    \"marketingOptIn\": true\n  },\n  \"acceptedTerms\": true\n}\n</code></pre>"},{"location":"services/customer-service/#contract-response","title":"Contract Response","text":"<pre><code>{\n  \"contractId\": 5001,\n  \"contractNumber\": \"CTR-2025-00001\",\n  \"customerId\": 1,\n  \"status\": \"active\",\n  \"startDate\": \"2025-02-01\",\n  \"endDate\": \"2026-02-01\",\n  \"signedAt\": \"2025-01-15T14:30:00Z\",\n  \"plan\": {\n    \"planId\": 1001,\n    \"name\": \"Green Energy 12\",\n    \"ratePerKwh\": 11.9,\n    \"termMonths\": 12,\n    \"planType\": \"fixed\"\n  },\n  \"earlyTerminationFee\": 150.00,\n  \"accounts\": [\n    {\n      \"accountId\": 1001,\n      \"accountNumber\": \"1234567890\",\n      \"addedAt\": \"2025-01-15T14:30:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#contract-list-response","title":"Contract List Response","text":"<pre><code>{\n  \"contracts\": [\n    {\n      \"contractId\": 5001,\n      \"contractNumber\": \"CTR-2025-00001\",\n      \"status\": \"active\",\n      \"startDate\": \"2025-02-01\",\n      \"endDate\": \"2026-02-01\",\n      \"planName\": \"Green Energy 12\",\n      \"accountCount\": 1\n    },\n    {\n      \"contractId\": 4001,\n      \"contractNumber\": \"CTR-2024-00015\",\n      \"status\": \"expired\",\n      \"startDate\": \"2024-02-01\",\n      \"endDate\": \"2025-02-01\",\n      \"planName\": \"Value Saver 12\",\n      \"accountCount\": 1\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#available-meters-response","title":"Available Meters Response","text":"<pre><code>{\n  \"address\": {\n    \"street\": \"123 Main Street\",\n    \"city\": \"Anytown\",\n    \"state\": \"TX\",\n    \"zip\": \"75001\"\n  },\n  \"meters\": [\n    {\n      \"meterId\": 3001,\n      \"meterNumber\": \"E-12345678\",\n      \"type\": \"electric\",\n      \"status\": \"available\"\n    },\n    {\n      \"meterId\": 3002,\n      \"meterNumber\": \"E-23456789\",\n      \"type\": \"electric\",\n      \"status\": \"available\"\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#customer-response","title":"Customer Response","text":"<pre><code>{\n  \"customerId\": 1,\n  \"type\": \"individual\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Smith\",\n  \"email\": \"john.smith@example.com\",\n  \"phone\": \"(555) 123-4567\",\n  \"status\": \"active\",\n  \"createdAt\": \"2020-03-15T00:00:00Z\",\n  \"accounts\": [\n    {\n      \"accountId\": 1001,\n      \"accountNumber\": \"1234567890\",\n      \"status\": \"active\"\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#business-customer-response","title":"Business Customer Response","text":"<pre><code>{\n  \"customerId\": 2,\n  \"type\": \"business\",\n  \"businessName\": \"Acme Corporation\",\n  \"email\": \"accounts@acme.com\",\n  \"phone\": \"(555) 987-6543\",\n  \"status\": \"active\",\n  \"createdAt\": \"2019-01-15T00:00:00Z\",\n  \"accounts\": [\n    {\n      \"accountId\": 1002,\n      \"accountNumber\": \"9876543210\",\n      \"nickname\": \"Headquarters\",\n      \"status\": \"active\"\n    },\n    {\n      \"accountId\": 1003,\n      \"accountNumber\": \"5555555555\",\n      \"nickname\": \"Warehouse District\",\n      \"status\": \"active\"\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#account-detail-response","title":"Account Detail Response","text":"<pre><code>{\n  \"accountId\": 1001,\n  \"accountNumber\": \"1234567890\",\n  \"nickname\": null,\n  \"status\": \"active\",\n  \"currentBalance\": 142.50,\n  \"lastPaymentDate\": \"2024-12-15\",\n  \"lastPaymentAmount\": 128.75,\n  \"premises\": [\n    {\n      \"premiseId\": 2001,\n      \"street\": \"123 Main Street\",\n      \"unit\": null,\n      \"city\": \"Anytown\",\n      \"state\": \"TX\",\n      \"zip\": \"75001\",\n      \"isPrimary\": true,\n      \"meters\": [\n        {\n          \"meterId\": 3001,\n          \"meterNumber\": \"E-12345678\",\n          \"type\": \"electric\",\n          \"status\": \"active\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"services/customer-service/#customer-summary-response","title":"Customer Summary Response","text":"<pre><code>{\n  \"totalAccounts\": 3,\n  \"totalPremises\": 5,\n  \"totalMeters\": 6,\n  \"totalCurrentBalance\": 5327.55,\n  \"totalDueAmount\": 5327.55,\n  \"nextDueDate\": \"2025-01-22\",\n  \"usageByType\": {\n    \"electric\": {\n      \"usage\": 109280,\n      \"unit\": \"kWh\"\n    }\n  }\n}\n</code></pre>"},{"location":"services/customer-service/#meter-detail-response","title":"Meter Detail Response","text":"<pre><code>{\n  \"meterId\": 3001,\n  \"meterNumber\": \"E-12345678\",\n  \"type\": \"electric\",\n  \"status\": \"active\",\n  \"installDate\": \"2020-03-15\",\n  \"lastReading\": 1245,\n  \"lastReadingDate\": \"2025-01-10\",\n  \"unit\": \"kWh\",\n  \"premise\": {\n    \"premiseId\": 2001,\n    \"street\": \"123 Main Street\",\n    \"city\": \"Anytown\",\n    \"state\": \"TX\",\n    \"zip\": \"75001\"\n  }\n}\n</code></pre>"},{"location":"services/customer-service/#preferences-response","title":"Preferences Response","text":"<pre><code>{\n  \"billDelivery\": \"email\",\n  \"notifications\": {\n    \"billReady\": true,\n    \"paymentDue\": true,\n    \"outageAlerts\": true,\n    \"highUsageAlerts\": false\n  },\n  \"autoPay\": {\n    \"enabled\": false,\n    \"paymentMethodId\": null\n  },\n  \"mailingAddress\": {\n    \"sameAsPrimaryPremise\": true,\n    \"street\": null,\n    \"city\": null,\n    \"state\": null,\n    \"zip\": null\n  }\n}\n</code></pre>"},{"location":"services/customer-service/#events","title":"Events","text":"<p>The Customer Service publishes events to Kafka for cross-service communication:</p> Event Description Consumers <code>EnrollmentSubmitted</code> New enrollment request received Workflow <code>EnrollmentCompleted</code> Enrollment processing completed Notifications <code>CustomerCreated</code> New customer enrolled Billing, Market <code>CustomerUpdated</code> Customer profile changed Billing <code>AccountCreated</code> New account added Billing <code>AccountStatusChanged</code> Account activated/deactivated Billing, Market <code>ContractCreated</code> New contract created during enrollment Billing, Market <code>ContractActivated</code> Contract start date reached Billing <code>ContractExpiring</code> Contract approaching end date Notifications <code>ContractExpired</code> Contract term ended Billing <code>ContractRenewed</code> Customer renewed into new contract Billing, Market <code>ContractCancelled</code> Contract cancelled early Billing <code>PremiseAdded</code> New premise added Meter, Market <code>MeterEnrolled</code> Meter selected during enrollment Meter, Market <code>MeterInstalled</code> Meter added to premise Meter, Billing <code>MeterRemoved</code> Meter removed from premise Meter, Billing <code>PreferencesUpdated</code> Customer preferences changed Billing, Notifications"},{"location":"services/customer-service/#integration-points","title":"Integration Points","text":""},{"location":"services/customer-service/#billing-service","title":"Billing Service","text":"<ul> <li>Receives account and customer data for invoice generation</li> <li>Notified of account status changes</li> <li>Queries customer preferences for bill delivery</li> </ul>"},{"location":"services/customer-service/#meter-service","title":"Meter Service","text":"<ul> <li>Receives meter registration data</li> <li>Reports meter readings back to Customer Service</li> <li>Coordinates meter exchange operations</li> </ul>"},{"location":"services/customer-service/#market-service","title":"Market Service","text":"<ul> <li>Receives customer/premise data for market enrollments</li> <li>Coordinates move-in/move-out transactions</li> <li>Reports market-initiated changes</li> </ul>"},{"location":"services/customer-service/#customer-portal-features","title":"Customer Portal Features","text":"<p>The Customer Portal (<code>ossrep-customer-portal</code>) provides self-service access to Customer Service capabilities:</p>"},{"location":"services/customer-service/#enrollment-start-service","title":"Enrollment (Start Service)","text":"<p>7-step guided enrollment for new customers with confirmation page:</p> <ol> <li>Customer Type - Individual or business selection</li> <li>Contact Information - Customer and contact details</li> <li>Service Address &amp; Start Date - Premise location and requested start date</li> <li>Plan Selection - Choose electricity plan (rate, term, features)</li> <li>Meter Selection - Select meters at the premise to enroll</li> <li>Mailing Address - Billing address configuration</li> <li>Review &amp; Terms - Summary and terms acceptance</li> <li>Confirmation Page - Complete summary with confirmation number and next steps</li> </ol> <p>The plan selection step displays available electricity plans with rates, contract terms, renewable energy options, and links to required disclosure documents (EFL, TOS, YRAC). Upon completion, customers receive a confirmation number and can print their enrollment summary.</p>"},{"location":"services/customer-service/#dashboard","title":"Dashboard","text":"<ul> <li>Aggregated view across all accounts (especially for business customers)</li> <li>Total balance due with next due date</li> <li>Account/premise/meter counts</li> <li>Usage summary by meter type</li> </ul>"},{"location":"services/customer-service/#account-management","title":"Account Management","text":"<ul> <li>View all accounts with balances</li> <li>Premises with meter details</li> <li>Meter reading history</li> </ul>"},{"location":"services/customer-service/#profile-preferences","title":"Profile &amp; Preferences","text":"<ul> <li>Update contact information</li> <li>Manage mailing address</li> <li>Set communication preferences</li> <li>Configure notification settings</li> <li>Enable/disable auto-pay</li> </ul>"},{"location":"services/customer-service/#security","title":"Security","text":""},{"location":"services/customer-service/#authentication","title":"Authentication","text":"<ul> <li>OIDC/JWT authentication via Keycloak</li> <li>Customer ID derived from JWT <code>sub</code> claim</li> </ul>"},{"location":"services/customer-service/#authorization","title":"Authorization","text":"<ul> <li>Customers can only access their own data</li> <li>Account ownership verified on all operations</li> <li>Admin endpoints require elevated roles</li> </ul>"},{"location":"services/customer-service/#data-privacy","title":"Data Privacy","text":"<ul> <li>PII encrypted at rest</li> <li>Audit logging for all data access</li> <li>GDPR/CCPA compliance considerations</li> </ul>"},{"location":"services/overview/","title":"Services Overview","text":"<p>OSSREP is composed of several microservices, each responsible for a specific business domain within retail electricity operations.</p>"},{"location":"services/overview/#core-services","title":"Core Services","text":""},{"location":"services/overview/#customer-service","title":"Customer Service","text":"<p>Manages customer lifecycle, accounts, premises, and meters. Supports both individual (residential) and business (commercial) customers with flexible account hierarchies.</p> <p>Repository: <code>customer-service</code></p> <p>Full Documentation \u2192</p> <p>Key Capabilities:</p> <ul> <li>Customer enrollment and onboarding (individual and business)</li> <li>7-step enrollment flow with plan selection, meter selection, and confirmation page</li> <li>Contract management (creation, renewal, cancellation)</li> <li>Multi-account support for business customers</li> <li>Premise management</li> <li>Meter registration and tracking</li> <li>Customer preferences and communication settings</li> <li>Aggregated views across accounts for business customers</li> </ul>"},{"location":"services/overview/#meter-service","title":"Meter Service","text":"<p>Handles meter assets and consumption data.</p> <p>Repository: <code>meter-service</code></p> <p>Key Capabilities:</p> <ul> <li>Meter registration and tracking</li> <li>Meter reading collection</li> <li>Usage data validation (VEE)</li> <li>Interval data management</li> <li>Meter exchange tracking</li> </ul>"},{"location":"services/overview/#billing-service","title":"Billing Service","text":"<p>Generates invoices and manages payments.</p> <p>Repository: <code>billing-service</code></p> <p>Key Capabilities:</p> <ul> <li>Invoice generation</li> <li>Payment processing</li> <li>Payment arrangements</li> <li>Collections management</li> <li>Account adjustments</li> </ul>"},{"location":"services/overview/#market-service","title":"Market Service","text":"<p>Handles market transactions and regulatory communications.</p> <p>Repository: <code>market-service</code></p> <p>Key Capabilities:</p> <ul> <li>EDI transaction processing</li> <li>Market participant messaging</li> <li>Enrollment transactions</li> <li>Usage request/response</li> <li>Regulatory reporting</li> </ul>"},{"location":"services/overview/#product-service","title":"Product Service","text":"<p>Manages rate plans and product offerings that customers select during enrollment.</p> <p>Repository: <code>product-service</code></p> <p>Key Capabilities:</p> <ul> <li>Rate plan definitions (fixed, variable, indexed)</li> <li>Product catalog with pricing tiers</li> <li>Contract terms and early termination fees</li> <li>Renewable energy options and percentages</li> <li>Regulatory document management (EFL, TOS, YRAC)</li> <li>Service area and ZIP code availability</li> <li>Promotional offers and discounts</li> </ul> <p>Plan Types:</p> <ul> <li>Fixed Rate - Locked energy rate for the contract term</li> <li>Variable Rate - Rate adjusts monthly based on market conditions</li> <li>Indexed Rate - Rate tied to a market index plus margin</li> </ul>"},{"location":"services/overview/#service-communication","title":"Service Communication","text":"<p>Services communicate through two primary mechanisms:</p>"},{"location":"services/overview/#rest-apis","title":"REST APIs","text":"<ul> <li>Synchronous request/response</li> <li>OpenAPI documented</li> <li>JWT authentication</li> </ul>"},{"location":"services/overview/#kafka-events","title":"Kafka Events","text":"<ul> <li>Asynchronous event streaming</li> <li>Domain events for cross-service consistency</li> <li>Event schemas defined with Protocol Buffers</li> </ul>"},{"location":"services/overview/#repository-structure","title":"Repository Structure","text":"<p>Each service repository follows a standard structure:</p> <pre><code>service-name/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main/\n\u2502   \u2502   \u251c\u2500\u2500 java/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 io/github/ossrep/servicename/\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 api/           # REST resources\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 service/       # Business logic\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 repository/    # Data access\n\u2502   \u2502   \u2514\u2500\u2500 resources/\n\u2502   \u2502       \u251c\u2500\u2500 application.yaml\n\u2502   \u2502       \u251c\u2500\u2500 db/migration/      # Flyway scripts\n\u2502   \u2502       \u2514\u2500\u2500 ValidationMessages.properties\n\u2502   \u2514\u2500\u2500 test/\n\u251c\u2500\u2500 pom.xml\n\u2514\u2500\u2500 README.md\n</code></pre>"}]}